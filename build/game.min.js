!function(e){function t(t){for(var i,h,r=t[0],o=t[1],c=t[2],d=0,u=[];d<r.length;d++)h=r[d],n[h]&&u.push(n[h][0]),n[h]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);for(l&&l(t);u.length;)u.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,r=1;r<s.length;r++){var o=s[r];0!==n[o]&&(i=!1)}i&&(a.splice(t--,1),e=h(h.s=s[0]))}return e}var i={},n={0:0},a=[];function h(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,h),s.l=!0,s.exports}h.m=e,h.c=i,h.d=function(e,t,s){h.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},h.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.t=function(e,t){if(1&t&&(e=h(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(h.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)h.d(s,i,function(t){return e[t]}.bind(null,i));return s},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="./";var r=window.webpackJsonp=window.webpackJsonp||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=o;a.push([468,1]),s()}({1151:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Preloader=class extends Phaser.Scene{constructor(){super({key:"preloader",pack:{files:[{type:"image",key:"playerSprt0",url:"./assets/spritesheets/shipTest.png"},{type:"image",key:"playerSprt1",url:"./assets/spritesheets/doggo.png"},{type:"image",key:"playerHealthSprt0",url:"./assets/spritesheets/healthTest.png"},{type:"image",key:"playerHealthSprt1",url:"./assets/spritesheets/meal.png"},{type:"image",key:"shotSprt0",url:"./assets/spritesheets/shotTest.png"},{type:"image",key:"shotSprt1",url:"./assets/spritesheets/potato.png"}]}})}init(){this.scene.start("main",{gameMode:0}),this.scene.pause("main"),this.scene.launch("scores"),this.scene.stop("scores"),this.scene.launch("menu"),this.scene.launch("gameHud"),this.scene.moveAbove("gameHud","menu"),this.scene.moveAbove("gameHud","pauseMenu")}preload(){this.load.audio("playerShoot","./assets/audio/shoot.wav"),this.load.audio("playerKilled","./assets/audio/explosion.wav"),this.load.audio("enemyKilled","./assets/audio/invaderkilled.wav")}}},1152:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1153),n=s(1154),a=s(1155);t.Main=class extends Phaser.Scene{constructor(){super({key:"main"}),this.gameMode=0,this.enemiesPoints=[30,20,20,10,10],this.enemiesShootTiming=0,this.enemiesMarginGrid=50}init(e){this.registry.set("gameMode",e.gameMode),this.gameMode=e.gameMode,this.key=this.input.keyboard.createCursorKeys(),this.enemies=this.add.group({runChildUpdate:!0})}create(){this.player=new i.Player(this,"playerSprt"+this.gameMode,this.key);for(let e=0;e<4;e++)this.initShield(96+161*e,this.sys.canvas.height-202);this.enemiesReferGrid=[],this.enemiesShootDelay=1666;for(let e=0;e<5;e++){const t=[];for(let s=0;s<11;s++)this.enemies.add(new a.Enemy(this,60+s*this.enemiesMarginGrid,90+e*this.enemiesMarginGrid,"",s+";"+e,this.enemiesPoints[e])),t.push(1);this.enemiesReferGrid.push(t)}this.checkCollisionEnemy()}update(e){if(this.player.move(e),a.Enemy.updatePosition(e),this.enemiesShootTiming<e){let t=this.getEnemiesShooting();t[Math.floor(Math.random()*t.length)].shoot(),this.enemiesShootTiming=e+this.enemiesShootDelay}}checkCollisionShotPlayer(e){let t=this.enemiesReferGrid;this.enemies.getChildren().forEach(s=>{s.active&&this.physics.add.overlap(e,s,function(){t[Number(s.getCoordinates()[1])][Number(s.getCoordinates()[0])]=0,s.die(),e.destroy()})}),n.ShieldPiece.pieces.forEach(t=>{t.active&&this.physics.add.overlap(e,t,function(){t.destroy(),e.destroy()})}),this.enemiesReferGrid=t}checkCollisionShotEnemy(e){let t=this.player;this.physics.add.overlap(e,t,function(){t.mainScene.events.emit("decreaseHealth"),e.destroy()}),n.ShieldPiece.pieces.forEach(t=>{t.active&&this.physics.add.overlap(e,t,function(){t.destroy(),e.destroy()})})}checkCollisionEnemy(){this.enemies.getChildren().forEach(e=>{n.ShieldPiece.pieces.forEach(t=>{this.physics.add.overlap(e,t,function(){e.active&&t.destroy()})})})}initShield(e,t){let s=3,i=7,a=4,h=6;for(let r=0;r<7;r++)if(r<4){for(let a=0;a<11;a++)a>=s&&a<=i&&new n.ShieldPiece(this,"",e+10*a,t+10*r);s--,i++}else{for(let s=0;s<11;s++)s>=a&&s<=h||new n.ShieldPiece(this,"",e+10*s,t+10*r);r<3&&(a--,h++)}}getEnemiesAreaRange(){let e,t,s,i=10,n=0,a=0;if(this.enemiesGroupIsEmpty())this.scene.pause("main"),this.scene.launch("generalMessage");else for(let h=0;h<this.enemiesReferGrid.length;h++)for(let r=this.enemiesReferGrid[h].length-1;r>=0;r--)this.enemiesReferGrid[h][r]&&r>n&&(n=r,t=this.enemies.getChildren()[11*h+r]),this.enemiesReferGrid[h][10-r]&&10-r<i&&(i=10-r,e=this.enemies.getChildren()[11*h+(10-r)]),this.enemiesReferGrid[4-h][10-r]&&4-h>a&&(a=4-h,s=this.enemies.getChildren()[11*(4-h)+r]);return this.correctEnemiesRefer([e,t,s])}enemiesGroupIsEmpty(){let e=!0;return this.enemies.getChildren().forEach(t=>{t.active&&(e=!1)}),e}correctEnemiesRefer(e){let t=[];return void 0==e[0]?t[0]=t[1]=e[1]:void 0==e[1]?t[0]=t[1]=e[0]:t=e,void 0==e[2]&&(t[2]=t[0]),t}getEnemiesShooting(){const e=[];for(let t=0;t<5;t++)for(let s=0;s<11;s++)this.enemiesReferGrid[t][s]&&(e[s]=this.enemies.getChildren()[11*t+s]);return e}decreaseEnemiesShootDelay(){this.enemiesShootDelay-=this.enemiesShootDelay-50<1500?50:0}}},1153:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(466);t.Player=class extends Phaser.GameObjects.Image{constructor(e,t,s){super(e,0,0,t),this.customKeys={},this.shootTiming=0,this.bulletsAlive=this.scene.add.group(),this.inputKey=s,this.customKeys.D=this.scene.input.keyboard.addKey("D"),this.mainScene=e,this.canvas=this.mainScene.sys.canvas,this.scale=70/this.width,this.x=this.canvas.width/2,this.y=this.canvas.height-this.height*this.scale-15,this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setScale(this.scale)}move(e){if(this.inputKey.left.isDown&&this.x>this.width*this.scale/2&&(this.x+=-5),this.inputKey.right.isDown&&this.x<this.canvas.width-this.width*this.scale/2&&(this.x+=5),this.inputKey.space.isDown&&this.bulletsAlive.getLength()<1&&this.shootTiming<e){let t=this.mainScene.registry.get("gameMode");const s=new i.Shot(this.scene,this.x,this.y,-450,"shotSprt"+t);this.bulletsAlive.add(s),this.mainScene.checkCollisionShotPlayer(s),this.mainScene.sound.play("playerShoot"),this.shootTiming=e+450}this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()}}},1154:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Phaser.GameObjects.Image{constructor(e,t,s,n){super(e,0,0,t),i.pieces.push(this),this.x=s,this.y=n,this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setScale(.3)}}i.pieces=[],t.ShieldPiece=i},1155:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(466);class n extends Phaser.GameObjects.Image{constructor(e,t,s,i,a,h){super(e,t,s,i),this.bulletsAlive=this.scene.add.group(),this.id=a,this.point=h,n.width=this.width,n.height=this.height,n.speed=10,n.timingMove=0,n.enemyMoveDelay=420,n.mainScene=e,n.canvas=e.sys.canvas,this.customY=this.y,this.scene.physics.world.enable(this),this.scene.add.existing(this)}getId(){return this.id}getCoordinates(){return[this.getId().split(";")[0],this.getId().split(";")[1]]}incrementSpeed(){let e=n.speed<0?-1:1,t=this.point/10;Math.abs(n.speed+t*e)<25&&(n.speed+=t*e,n.enemyMoveDelay-=this.point)}static updatePosition(e){let t=n.mainScene.getEnemiesAreaRange();this.timingMove<e&&(n.mainScene.enemies.getChildren().forEach(e=>e.x+=n.speed),t[1].x<=n.canvas.width-2*n.width&&t[0].x>2*this.width||(n.speed*=-1,n.goDown(t[2])),n.timingMove=e+n.enemyMoveDelay)}static goDown(e){e.customY<n.canvas.height-3*n.height?setTimeout(function(){n.mainScene.enemies.getChildren().forEach(e=>{e.customY+=15,e.y=e.customY})},100):(this.mainScene.scene.pause("main"),this.mainScene.scene.get("gameHud").pushScore(),this.mainScene.scene.launch("loseScreen"))}shoot(){let e=n.mainScene.registry.get("gameMode"),t=new i.Shot(n.mainScene,this.x,this.y,450,"shotSprt"+e);this.bulletsAlive.add(t),n.mainScene.checkCollisionShotEnemy(t),this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()}die(){this.incrementSpeed(),n.mainScene.sound.play("enemyKilled"),n.mainScene.events.emit("incrementScore",this.point),n.mainScene.decreaseEnemiesShootDelay(),this.setActive(!1),this.setVisible(!1)}}n.speed=10,n.timingMove=0,n.enemyMoveDelay=420,t.Enemy=n},1156:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(88);t.Menu=class extends Phaser.Scene{constructor(){super({key:"menu"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)"),this.events.emit("updateScores")}create(){let e=this.sys.canvas.width/2;this.titleLabel=this.add.text(e,this.sys.canvas.height/10*3.6,"Space Invaders",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.descriptionLabel=this.add.text(e,this.sys.canvas.height/10*4.4,"- Progetto finale scolastico -",{font:"40px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonStartNormal=new i.Button(this,e,this.sys.canvas.height/10*5.8,"Modalità normale",44,()=>{this.scene.stop("menu"),this.scene.get("main").scene.restart({gameMode:0}),this.scene.get("gameHud").initPlayerHealth(0,0)}),this.buttonStartWeird=new i.Button(this,e,this.sys.canvas.height/10*6.6,"Modalità aggiuntiva",44,()=>{this.scene.stop("menu"),this.scene.get("main").scene.restart({gameMode:1}),this.scene.get("gameHud").initPlayerHealth(1,0)}),this.buttonScore=new i.Button(this,e,this.sys.canvas.height/10*7.4,"Punteggi",44,()=>{this.scene.stop("menu"),this.events.emit("updateScores"),this.scene.start("scores")})}}},1157:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(88);t.GeneralMessage=class extends Phaser.Scene{constructor(){super({key:"generalMessage"}),this.gameRound=1}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")}create(){this.scene.moveUp("generalMessage");let e,t,s,n=this.scene.get("gameHud").getGameMode(),a=this.scene.get("gameHud").getScore();if(3!=this.gameRound?(e="Round "+ ++this.gameRound,t=5,s="#347deb"):(e="Hai vinto!!!",t=4.7,s="#30db16"),this.messageLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*t,e,{font:"88px arc-font",fill:s}).setOrigin(.5),"Hai vinto!!!"==e)this.buttonMenu=new i.Button(this,this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Menu",44,()=>this.scene.start("menu")),this.scene.get("gameHud").pushScore(),this.gameRound=1;else{let e=this.scene;setTimeout(function(){e.stop("generalMessage")},1555),this.scene.get("gameHud").initPlayerHealth(n,a),this.scene.get("main").scene.restart()}}}},1158:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(88);t.PauseMenu=class extends Phaser.Scene{constructor(){super({key:"pauseMenu"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 0.75)")}create(){let e=this.sys.canvas.width/2;this.tittleLabel=this.add.text(e,this.sys.canvas.height/10*3.6,"Gioco in pausa",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonResume=new i.Button(this,this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Continua",44,()=>{this.scene.stop("pauseMenu"),this.scene.resume("main")}),this.buttonMenu=new i.Button(this,e,this.sys.canvas.height/10*6.6,"Menu",44,()=>{this.scene.stop("pauseMenu"),this.scene.start("menu")})}}},1159:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(467),n=s(88);t.GameHud=class extends Phaser.Scene{constructor(){super({key:"gameHud"}),this.gameMode=0,this.score=0}init(){this.graphics=this.add.graphics({x:0,y:0,fillStyle:{color:16777215,alpha:1}}),this.mainScene=this.scene.get("main"),this.playerHealth=this.add.group()}create(){this.scoreLabel=this.add.text(15,15,"Punteggio 0",{font:"40px arc-font",fill:"#fff"}),this.pauseButton=new n.Button(this,this.sys.canvas.width-45,this.sys.canvas.height-30,"Pausa",35,()=>{this.scene.pause("main"),this.scene.launch("pauseMenu")}),this.mainScene.events.on("incrementScore",function(e){this.score+=e,this.scoreLabel.setText("Punteggio "+this.score)},this),this.mainScene.events.on("decreaseHealth",this.decreasePlayerHealth,this),this.graphics.fillRect(0,this.sys.canvas.height-45,this.sys.canvas.width,3)}initPlayerHealth(e,t){if(0==t){this.playerHealth.getChildren().forEach(e=>e.destroy()),this.playerHealth.getChildren().forEach(e=>e.destroy());for(let t=1;t<=3;t++){let s=this.add.image(0,0,"playerHealthSprt"+e),i=25/s.width;s.setScale(i),s.x=this.mainScene.sys.canvas.width-t*(s.width*i),s.y=s.height*i,this.playerHealth.add(s)}}this.score=t,this.scoreLabel.setText("Punteggio "+this.score)}decreasePlayerHealth(){this.playerHealth.getChildren()[this.playerHealth.getChildren().length-1].destroy(),0==this.playerHealth.getChildren().length&&(this.scene.pause("main"),this.pushScore(),this.scene.transition({target:"loseScreen",duration:1e3}),this.scene.launch("loseScreen"))}getDate(){const e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}pushScore(){i.Scores.scores.push([this.score,this.getDate()]),console.log(i.Scores.scores)}getScore(){return this.score}getGameMode(){return this.gameMode}}},1160:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(88);t.Lose=class extends Phaser.Scene{constructor(){super({key:"loseScreen"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")}create(){let e=this.sys.canvas.width/2,t=this.scene.get("gameHud").getGameMode(),s=this.scene.get("gameHud").getScore();this.messageLabel=this.add.text(e,this.sys.canvas.height/10*3.6,"Hai perso bitch",{font:"77px arc-font",fill:"#ff0000"}).setOrigin(.5),this.scoreLabel=this.add.text(e,this.sys.canvas.height/10*4.4,"Punteggio: "+s,{font:"55px arc-font",fill:"#ff0000"}).setOrigin(.5),this.buttonRestart=new i.Button(this,e,this.sys.canvas.height/10*5.8,"Nuova partita",44,()=>{this.scene.stop("loseScreen"),this.scene.get("gameHud").initPlayerHealth(t,0),this.scene.get("main").scene.restart()}),this.buttonMenu=new i.Button(this,e,this.sys.canvas.height/10*6.6,"Menu",44,()=>{this.scene.stop("loseScreen"),this.scene.start("menu")})}}},466:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Shot=class extends Phaser.GameObjects.Image{constructor(e,t,s,i,n){super(e,t,s,n),this.scene.physics.world.enable(this),this.scene.add.existing(this);let a=10/this.width;this.setScale(a),this.setDepth(-1),this.initMovement(i)}initMovement(e){this.scene.physics.world.enable(this),this.body.setVelocityY(e)}update(){this.y<0&&this.destroy()}}},467:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(88);class n extends Phaser.Scene{constructor(){super({key:"scores"}),this.textGroup=[]}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)"),this.graphics=this.add.graphics({x:0,y:0,fillStyle:{color:16711680,alpha:1}}),null!=sessionStorage.getItem("scores")&&n.scores.length>0&&(n.scores=JSON.parse(sessionStorage.getItem("scores"))),this.updateScores(),this.scene.moveUp("scores")}create(){this.titleLabel=this.add.text(this.sys.canvas.width/2,66,"Punteggi",{font:"70px arc-font",fill:"#347deb"}).setOrigin(.5),this.buttonMenu=new i.Button(this,50,30,"Menu",40,()=>{this.scene.stop("scores"),this.scene.start("menu")}),this.graphics.fillRect((this.sys.canvas.width-400)/2,222,400,3),this.scene.get("menu").events.on("updateScores",this.updateScores,this)}getMaxScore(){let e=0;return n.scores.forEach(t=>e=t[0]>e?t[0]:e),e}updateScores(){sessionStorage.setItem("scores",JSON.stringify(n.scores)),this.reformatScores(),this.textGroup.forEach(e=>e.destroy());let e=this.maxScore=this.add.text(this.sys.canvas.width/2,180,"Punteggio massimo: "+this.getMaxScore(),{font:"40px arc-font",fill:"#fff"}).setOrigin(.5);this.textGroup.push(e);let t=0,s="";this.reformatScores().forEach(e=>{let i=e[1]===s?"||":e[1],n=e[0].toString();const a=("- "+i).padEnd(16,"_")+n.padStart(4,"_");let h=this.add.text(this.sys.canvas.width/2,264+t,a,{font:"40px arc-font",fill:"#fff"}).setOrigin(.5);this.textGroup.push(h),t+=40,s=e[1]})}reformatScores(){let e=n.scores,t=[],s=0;for(let i=n.scores.length-1;i>0&&9!=s;i--)t.push(e[i]),s++;return t}}n.scores=[[0,""]],t.Scores=n},468:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(469);const i=s(1151),n=s(1152),a=s(1156),h=s(1157),r=s(1158),o=s(467),c=s(1159),l=s(1160),d={type:Phaser.AUTO,parent:"canvas",width:777,height:777,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[i.Preloader,n.Main,a.Menu,r.PauseMenu,h.GeneralMessage,o.Scores,c.GameHud,l.Lose]};window.addEventListener("load",()=>{new Phaser.Game(d)})},88:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Button=class extends Phaser.GameObjects.Text{constructor(e,t,s,i,n,a){super(e,t,s,i,{}),this.setColor("#dbba16"),this.setFont(n+"px arc-font"),this.setInteractive(),this.on("pointerover",()=>this.setColor("#30db16")),this.on("pointerout",()=>this.setColor("#dbba16")),this.on("pointerdown",()=>this.setFont(n-6+"px arc-font")),this.on("pointerup",()=>{this.setFont(n+"px arc-font"),a()}),this.setOrigin(.5),e.add.existing(this)}}}});