!function(t){function e(e){for(var o,r,a=e[0],c=e[1],u=e[2],p=0,f=[];p<a.length;p++)r=a[p],i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(h&&h(e);f.length;)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},i={0:0},s=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var h=c;s.push([466,1]),n()}({1149:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this,{key:"preloader",pack:{files:[{type:"image",key:"playerSprt0",url:"./assets/spritesheets/shipTest.png"},{type:"image",key:"playerSprt1",url:"./assets/spritesheets/doggo.png"},{type:"image",key:"playerHealthSprt0",url:"./assets/spritesheets/healthTest.png"},{type:"image",key:"playerHealthSprt1",url:"./assets/spritesheets/meal.png"},{type:"image",key:"shotSprt0",url:"./assets/spritesheets/shotTest.png"},{type:"image",key:"shotSprt1",url:"./assets/spritesheets/potato.png"}]}})||this}return o(e,t),e.prototype.init=function(){this.scene.start("main",{gameMode:0}),this.scene.pause("main"),this.scene.launch("menu"),this.scene.launch("gameHud"),this.scene.moveAbove("gameHud","menu")},e.prototype.preload=function(){this.load.audio("playerShoot","./assets/audio/shoot.wav"),this.load.audio("playerKilled","./assets/audio/explosion.wav"),this.load.audio("enemyKilled","./assets/audio/invaderkilled.wav")},e}(Phaser.Scene);e.Preloader=i},1150:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1151),s=n(1152),r=function(t){function e(){var e=t.call(this,"main")||this;return e.gameMode=0,e.enemiesPoints=[30,20,20,10,10],e.enemiesShootTiming=0,e.enemiesMarginGrid=50,e}return o(e,t),e.prototype.init=function(t){this.registry.set("gameMode",t.gameMode),this.gameMode=t.gameMode,this.key=this.input.keyboard.createCursorKeys(),this.enemies=this.add.group({runChildUpdate:!0})},e.prototype.create=function(){this.player=new i.Player(this,"playerSprt"+this.gameMode,this.key),this.enemiesReferGrid=[],this.enemiesShootDelay=1666;for(var t=0;t<5;t++){for(var e=[],n=0;n<11;n++)this.enemies.add(new s.Enemy(this,60+n*this.enemiesMarginGrid,90+t*this.enemiesMarginGrid,"",n+";"+t,this.enemiesPoints[t])),e.push(1);this.enemiesReferGrid.push(e)}console.log(this.enemiesReferGrid)},e.prototype.update=function(t){if(this.player.move(t),s.Enemy.updatePosition(t),this.enemiesShootTiming<t){var e=this.getEnemiesShooting();e[Math.floor(Math.random()*e.length)].shoot(),this.enemiesShootTiming=t+this.enemiesShootDelay}},e.prototype.checkCollisionShotPlayer=function(t){var e=this,n=this.enemiesReferGrid;this.enemies.getChildren().forEach(function(o){o.active&&e.physics.add.overlap(t,o,function(){n[Number(o.getCoordinates()[1])][Number(o.getCoordinates()[0])]=0,o.die(),t.destroy()})}),this.enemiesReferGrid=n,console.log(this.getEnemiesAreaRange())},e.prototype.checkCollisionShotEnemy=function(t){var e=this.player;this.physics.add.overlap(t,e,function(){e.mainScene.events.emit("decraseHealth"),t.destroy()})},e.prototype.getEnemiesAreaRange=function(){for(var t,e,n,o=10,i=0,s=0,r=0;r<this.enemiesReferGrid.length;r++)for(var a=this.enemiesReferGrid[r].length-1;a>=0;a--)this.enemiesReferGrid[r][a]&&a>i&&(i=a,e=this.enemies.getChildren()[11*r+a]),this.enemiesReferGrid[r][10-a]&&10-a<o&&(o=10-a,t=this.enemies.getChildren()[11*r+(10-a)]),this.enemiesReferGrid[4-r][10-a]&&4-r>s&&(s=4-r,n=this.enemies.getChildren()[11*(4-r)+a]);return this.correctEnemiesRefer([t,e,n])},e.prototype.correctEnemiesRefer=function(t){var e=[];return void 0==t[0]?e[0]=e[1]=t[1]:void 0==t[1]?e[0]=e[1]=t[0]:e=t,void 0==t[2]&&(e[2]=e[0]),e},e.prototype.getEnemiesShooting=function(){for(var t=[],e=0;e<5;e++)for(var n=0;n<11;n++)this.enemiesReferGrid[e][n]&&(t[n]=this.enemies.getChildren()[11*e+n]);return t},e.prototype.decraseEnemiesShootDelay=function(){this.enemiesShootDelay-=this.enemiesShootDelay-50<1500?50:0},e}(Phaser.Scene);e.Main=r},1151:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(465),s=function(t){function e(e,n,o){var i=t.call(this,e,0,0,n)||this;return i.customKeys={},i.shootTiming=0,i.bulletsAlive=i.scene.add.group(),i.inputKey=o,i.customKeys.D=i.scene.input.keyboard.addKey("D"),i.mainScene=e,i.canvas=i.mainScene.sys.canvas,i.scale=70/i.width,i.x=i.canvas.width/2,i.y=i.canvas.height-i.height*i.scale-15,i.scene.physics.world.enable(i),i.scene.add.existing(i),i.setScale(i.scale),i}return o(e,t),e.prototype.move=function(t){if(this.inputKey.left.isDown&&this.x>this.width*this.scale/2&&(this.x+=-5),this.inputKey.right.isDown&&this.x<this.canvas.width-this.width*this.scale/2&&(this.x+=5),this.inputKey.space.isDown&&this.bulletsAlive.getLength()<1&&this.shootTiming<t){var e=this.mainScene.registry.get("gameMode"),n=new i.Shot(this.scene,this.x,this.y,-450,"shotSprt"+e);this.bulletsAlive.add(n),this.mainScene.checkCollisionShotPlayer(n),this.mainScene.sound.play("playerShoot"),this.shootTiming=t+450}this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()},e}(Phaser.GameObjects.Image);e.Player=s},1152:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(465),s=function(t){function e(n,o,i,s,r,a){var c=t.call(this,n,o,i,s)||this;return c.bulletsAlive=c.scene.add.group(),c.id=r,c.point=a,e.width=c.width,e.height=c.height,e.speed=10,e.timingMove=0,e.enemyMovedelay=420,e.mainScene=n,e.canvas=n.sys.canvas,c.customY=c.y,c.scene.physics.world.enable(c),c.scene.add.existing(c),c}return o(e,t),e.prototype.getId=function(){return this.id},e.prototype.getCoordinates=function(){return[this.getId().split(";")[0],this.getId().split(";")[1]]},e.prototype.incrementSpeed=function(){var t=e.speed<0?-1:1,n=this.point/10;Math.abs(e.speed+n*t)<25&&(e.speed+=n*t,e.enemyMovedelay-=this.point)},e.updatePosition=function(t){var n=e.mainScene.getEnemiesAreaRange()[0],o=e.mainScene.getEnemiesAreaRange()[1];this.timingMove<t&&(e.mainScene.enemies.getChildren().forEach(function(t){return t.x+=e.speed}),o.x<=e.canvas.width-2*e.width&&n.x>2*this.width||(e.speed*=-1,e.goDown()),e.timingMove=t+e.enemyMovedelay)},e.goDown=function(){e.mainScene.getEnemiesAreaRange()[2].customY<e.canvas.height-2*e.height&&setTimeout(function(){e.mainScene.enemies.getChildren().forEach(function(t){t.customY+=15,t.y=t.customY})},100)},e.prototype.shoot=function(){var t=e.mainScene.registry.get("gameMode"),n=new i.Shot(e.mainScene,this.x,this.y,450,"shotSprt"+t);this.bulletsAlive.add(n),e.mainScene.checkCollisionShotEnemy(n),this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()},e.prototype.die=function(){this.incrementSpeed(),e.mainScene.sound.play("enemyKilled"),e.mainScene.events.emit("incrementScore",this.point),e.mainScene.decraseEnemiesShootDelay(),this.setActive(!1),this.setVisible(!1)},e.speed=10,e.timingMove=0,e.enemyMovedelay=420,e}(Phaser.GameObjects.Image);e.Enemy=s},1153:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this,{key:"menu"})||this}return o(e,t),e.prototype.init=function(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")},e.prototype.create=function(){var t=this;this.titleLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Space Invaders",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.descriptionLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"- Progetto finale scolastico -",{font:"40px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonStartNormal=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Modalità normale",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonStartNormal.setColor("#30db16")}).on("pointerout",function(){return t.buttonStartNormal.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonStartNormal.setFont("38px arc-font")}).on("pointerup",function(){t.buttonStartNormal.setFont("44px arc-font"),t.scene.stop("menu"),t.scene.get("main").scene.restart({gameMode:0}),t.scene.get("gameHud").initPlayerHealth(0)}),this.buttonStartWeird=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Modalità aggiuntiva",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonStartWeird.setColor("#30db16")}).on("pointerout",function(){return t.buttonStartWeird.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonStartWeird.setFont("38px arc-font")}).on("pointerup",function(){t.buttonStartWeird.setFont("44px arc-font"),t.scene.stop("menu"),t.scene.get("main").scene.restart({gameMode:1}),t.scene.get("gameHud").initPlayerHealth(1)}),this.buttonScore=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*7.4,"Punteggi",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonScore.setColor("#30db16")}).on("pointerout",function(){return t.buttonScore.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonScore.setFont("38px arc-font")}).on("pointerup",function(){t.buttonScore.setFont("44px arc-font")})},e}(Phaser.Scene);e.Menu=i},1154:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this,{key:"pauseMenu"})||this}return o(e,t),e.prototype.init=function(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 0.75)"),this.scene.moveUp("pauseMenu")},e.prototype.create=function(){var t=this;this.tittleLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Gioco in pausa",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonResume=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Continua",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonResume.setColor("#30db16")}).on("pointerout",function(){return t.buttonResume.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonResume.setFont("38px arc-font")}).on("pointerup",function(){t.buttonResume.setFont("44px arc-font"),t.scene.stop("pauseMenu"),t.scene.resume("main")}),this.buttonMenu=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Menu",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonMenu.setColor("#30db16")}).on("pointerout",function(){return t.buttonMenu.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonMenu.setFont("38px arc-font")}).on("pointerup",function(){t.buttonMenu.setFont("44px arc-font"),t.scene.stop("pauseMenu"),t.scene.start("menu")})},e}(Phaser.Scene);e.PauseMenu=i},1155:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this,{key:"gameHud"})||this;return e.gameMode=0,e.score=0,e.scoreHistory=[],e}return o(e,t),e.prototype.init=function(){this.mainScene=this.scene.get("main"),this.playerHealth=this.add.group()},e.prototype.create=function(){var t=this;this.scoreLabel=this.add.text(15,15,"Punteggio 0",{font:"40px arc-font",fill:"#fff"}),this.pauseBotton=this.add.text(this.sys.canvas.width-45,this.sys.canvas.height-30,"Pausa",{font:"35px arc-font",fill:"#fff"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.pauseBotton.setColor("#dbba16")}).on("pointerout",function(){return t.pauseBotton.setColor("#fff")}).on("pointerdown",function(){return t.pauseBotton.setFont("29px arc-font")}).on("pointerup",function(){t.pauseBotton.setFont("35px arc-font"),t.scene.pause("main"),t.scene.launch("pauseMenu")}),this.mainScene.events.on("incrementScore",function(t){this.score+=t,this.scoreLabel.setText("Punteggio "+this.score)},this),this.mainScene.events.on("decraseHealth",this.decrasePlayerHealth,this)},e.prototype.initPlayerHealth=function(t){this.gameMode=t,this.playerHealth.getChildren().forEach(function(t){return t.destroy()}),this.playerHealth.getChildren().forEach(function(t){return t.destroy()});for(var e=1;e<=3;e++){var n=this.add.image(0,0,"playerHealthSprt"+t),o=25/n.width;n.setScale(o),n.x=this.mainScene.sys.canvas.width-e*(n.width*o),n.y=n.height*o,this.playerHealth.add(n)}this.scoreHistory.push(this.score),this.score=0,this.scoreLabel.setText("Punteggio 0")},e.prototype.decrasePlayerHealth=function(){this.playerHealth.getChildren()[this.playerHealth.getChildren().length-1].destroy(),0==this.playerHealth.getChildren().length&&(this.scene.pause("main"),this.scene.launch("loseScreen"))},e.prototype.getScore=function(){return this.score},e.prototype.getGameMode=function(){return this.gameMode},e}(Phaser.Scene);e.GameHud=i},1156:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this,{key:"loseScreen"})||this}return o(e,t),e.prototype.init=function(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")},e.prototype.create=function(){var t=this,e=this.scene.get("gameHud").getGameMode(),n=this.scene.get("gameHud").getScore();this.messageLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Hai perso bitch",{font:"77px arc-font",fill:"#ff0000"}).setOrigin(.5),this.scoreLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"Punteggio: "+n,{font:"55px arc-font",fill:"#ff0000"}).setOrigin(.5),this.buttonRestart=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Nuova partita",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonRestart.setColor("#30db16")}).on("pointerout",function(){return t.buttonRestart.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonRestart.setFont("38px arc-font")}).on("pointerup",function(){t.buttonRestart.setFont("44px arc-font"),t.scene.stop("loseScreen"),t.scene.get("gameHud").initPlayerHealth(e),t.scene.get("main").scene.restart()}),this.buttonMenu=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Menu",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonMenu.setColor("#30db16")}).on("pointerout",function(){return t.buttonMenu.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonMenu.setFont("38px arc-font")}).on("pointerup",function(){t.buttonMenu.setFont("44px arc-font"),t.scene.stop("loseScreen"),t.scene.start("menu")})},e}(Phaser.Scene);e.Lose=i},465:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,i,s){var r=t.call(this,e,n,o,s)||this;r.scene.physics.world.enable(r),r.scene.add.existing(r);var a=10/r.width;return r.setScale(a),r.setDepth(-1),r.initMovement(i),r}return o(e,t),e.prototype.initMovement=function(t){this.scene.physics.world.enable(this),this.body.setVelocityY(t)},e.prototype.update=function(){this.y<0&&this.destroy()},e}(Phaser.GameObjects.Image);e.Shot=i},466:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(467);var o=n(1149),i=n(1150),s=n(1153),r=n(1154),a=n(1155),c=n(1156),u={type:Phaser.AUTO,parent:"canvas",width:777,height:666,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[o.Preloader,i.Main,s.Menu,r.PauseMenu,a.GameHud,c.Lose]};window.addEventListener("load",function(){new Phaser.Game(u)})}});