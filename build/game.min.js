!function(e){function t(t){for(var i,a,r=t[0],h=t[1],c=t[2],d=0,u=[];d<r.length;d++)a=r[d],n[a]&&u.push(n[a][0]),n[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);for(l&&l(t);u.length;)u.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,r=1;r<s.length;r++){var h=s[r];0!==n[h]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={0:0},o=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=h;o.push([467,1]),s()}({1150:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Preloader=class extends Phaser.Scene{constructor(){super({key:"preloader",pack:{files:[{type:"image",key:"playerSprt0",url:"./assets/spritesheets/shipTest.png"},{type:"image",key:"playerSprt1",url:"./assets/spritesheets/doggo.png"},{type:"image",key:"playerHealthSprt0",url:"./assets/spritesheets/healthTest.png"},{type:"image",key:"playerHealthSprt1",url:"./assets/spritesheets/meal.png"},{type:"image",key:"shotSprt0",url:"./assets/spritesheets/shotTest.png"},{type:"image",key:"shotSprt1",url:"./assets/spritesheets/potato.png"}]}})}init(){this.scene.start("main",{gameMode:0}),this.scene.pause("main"),this.scene.launch("menu"),this.scene.launch("gameHud"),this.scene.moveAbove("gameHud","menu")}preload(){this.load.audio("playerShoot","./assets/audio/shoot.wav"),this.load.audio("playerKilled","./assets/audio/explosion.wav"),this.load.audio("enemyKilled","./assets/audio/invaderkilled.wav")}}},1151:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1152),n=s(1153);t.Main=class extends Phaser.Scene{constructor(){super("main"),this.gameMode=0,this.enemiesPoints=[30,20,20,10,10],this.enemiesShootTiming=0,this.enemiesMarginGrid=50}init(e){this.registry.set("gameMode",e.gameMode),this.gameMode=e.gameMode,this.key=this.input.keyboard.createCursorKeys(),this.enemies=this.add.group({runChildUpdate:!0})}create(){this.player=new i.Player(this,"playerSprt"+this.gameMode,this.key),this.enemiesReferGrid=[],this.enemiesShootDelay=1666;for(let e=0;e<5;e++){const t=[];for(let s=0;s<11;s++)this.enemies.add(new n.Enemy(this,60+s*this.enemiesMarginGrid,90+e*this.enemiesMarginGrid,"",s+";"+e,this.enemiesPoints[e])),t.push(1);this.enemiesReferGrid.push(t)}console.log(this.enemiesReferGrid)}update(e){if(this.player.move(e),n.Enemy.updatePosition(e),this.enemiesShootTiming<e){let t=this.getEnemiesShooting();t[Math.floor(Math.random()*t.length)].shoot(),this.enemiesShootTiming=e+this.enemiesShootDelay}}checkCollisionShotPlayer(e){let t=this.enemiesReferGrid;this.enemies.getChildren().forEach(s=>{s.active&&this.physics.add.overlap(e,s,function(){t[Number(s.getCoordinates()[1])][Number(s.getCoordinates()[0])]=0,s.die(),e.destroy()})}),this.enemiesReferGrid=t,console.log(this.getEnemiesAreaRange())}checkCollisionShotEnemy(e){let t=this.player;this.physics.add.overlap(e,t,function(){t.mainScene.events.emit("decraseHealth"),e.destroy()})}getEnemiesAreaRange(){let e,t,s,i=10,n=0,o=0;for(let a=0;a<this.enemiesReferGrid.length;a++)for(let r=this.enemiesReferGrid[a].length-1;r>=0;r--)this.enemiesReferGrid[a][r]&&r>n&&(n=r,t=this.enemies.getChildren()[11*a+r]),this.enemiesReferGrid[a][10-r]&&10-r<i&&(i=10-r,e=this.enemies.getChildren()[11*a+(10-r)]),this.enemiesReferGrid[4-a][10-r]&&4-a>o&&(o=4-a,s=this.enemies.getChildren()[11*(4-a)+r]);return this.correctEnemiesRefer([e,t,s])}correctEnemiesRefer(e){let t=[];return void 0==e[0]?t[0]=t[1]=e[1]:void 0==e[1]?t[0]=t[1]=e[0]:t=e,void 0==e[2]&&(t[2]=t[0]),t}getEnemiesShooting(){var e=[];for(let t=0;t<5;t++)for(let s=0;s<11;s++)this.enemiesReferGrid[t][s]&&(e[s]=this.enemies.getChildren()[11*t+s]);return e}decraseEnemiesShootDelay(){this.enemiesShootDelay-=this.enemiesShootDelay-50<1500?50:0}}},1152:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(465);t.Player=class extends Phaser.GameObjects.Image{constructor(e,t,s){super(e,0,0,t),this.customKeys={},this.shootTiming=0,this.bulletsAlive=this.scene.add.group(),this.inputKey=s,this.customKeys.D=this.scene.input.keyboard.addKey("D"),this.mainScene=e,this.canvas=this.mainScene.sys.canvas,this.scale=70/this.width,this.x=this.canvas.width/2,this.y=this.canvas.height-this.height*this.scale-15,this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setScale(this.scale)}move(e){if(this.inputKey.left.isDown&&this.x>this.width*this.scale/2&&(this.x+=-5),this.inputKey.right.isDown&&this.x<this.canvas.width-this.width*this.scale/2&&(this.x+=5),this.inputKey.space.isDown&&this.bulletsAlive.getLength()<1&&this.shootTiming<e){let t=this.mainScene.registry.get("gameMode");const s=new i.Shot(this.scene,this.x,this.y,-450,"shotSprt"+t);this.bulletsAlive.add(s),this.mainScene.checkCollisionShotPlayer(s),this.mainScene.sound.play("playerShoot"),this.shootTiming=e+450}this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()}}},1153:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(465);class n extends Phaser.GameObjects.Image{constructor(e,t,s,i,o,a){super(e,t,s,i),this.bulletsAlive=this.scene.add.group(),this.id=o,this.point=a,n.width=this.width,n.height=this.height,n.speed=10,n.timingMove=0,n.enemyMovedelay=420,n.mainScene=e,n.canvas=e.sys.canvas,this.customY=this.y,this.scene.physics.world.enable(this),this.scene.add.existing(this)}getId(){return this.id}getCoordinates(){return[this.getId().split(";")[0],this.getId().split(";")[1]]}incrementSpeed(){let e=n.speed<0?-1:1,t=this.point/10;Math.abs(n.speed+t*e)<25&&(n.speed+=t*e,n.enemyMovedelay-=this.point)}static updatePosition(e){let t=n.mainScene.getEnemiesAreaRange()[0],s=n.mainScene.getEnemiesAreaRange()[1];this.timingMove<e&&(n.mainScene.enemies.getChildren().forEach(e=>e.x+=n.speed),s.x<=n.canvas.width-2*n.width&&t.x>2*this.width||(n.speed*=-1,n.goDown()),n.timingMove=e+n.enemyMovedelay)}static goDown(){n.mainScene.getEnemiesAreaRange()[2].customY<n.canvas.height-2*n.height&&setTimeout(function(){n.mainScene.enemies.getChildren().forEach(e=>{e.customY+=15,e.y=e.customY})},100)}shoot(){let e=n.mainScene.registry.get("gameMode"),t=new i.Shot(n.mainScene,this.x,this.y,450,"shotSprt"+e);this.bulletsAlive.add(t),n.mainScene.checkCollisionShotEnemy(t),this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()}die(){this.incrementSpeed(),n.mainScene.sound.play("enemyKilled"),n.mainScene.events.emit("incrementScore",this.point),n.mainScene.decraseEnemiesShootDelay(),this.setActive(!1),this.setVisible(!1)}}n.speed=10,n.timingMove=0,n.enemyMovedelay=420,t.Enemy=n},1154:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Menu=class extends Phaser.Scene{constructor(){super({key:"menu"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")}create(){this.titleLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Space Invaders",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.descriptionLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"- Progetto finale scolastico -",{font:"40px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonStartNormal=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Modalità normale",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonStartNormal.setColor("#30db16")).on("pointerout",()=>this.buttonStartNormal.setColor("#dbba16")).on("pointerdown",()=>this.buttonStartNormal.setFont("38px arc-font")).on("pointerup",()=>{this.buttonStartNormal.setFont("44px arc-font"),this.scene.stop("menu"),this.scene.get("main").scene.restart({gameMode:0}),this.scene.get("gameHud").initPlayerHealth(0)}),this.buttonStartWeird=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Modalità aggiuntiva",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonStartWeird.setColor("#30db16")).on("pointerout",()=>this.buttonStartWeird.setColor("#dbba16")).on("pointerdown",()=>this.buttonStartWeird.setFont("38px arc-font")).on("pointerup",()=>{this.buttonStartWeird.setFont("44px arc-font"),this.scene.stop("menu"),this.scene.get("main").scene.restart({gameMode:1}),this.scene.get("gameHud").initPlayerHealth(1)}),this.buttonScore=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*7.4,"Punteggi",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonScore.setColor("#30db16")).on("pointerout",()=>this.buttonScore.setColor("#dbba16")).on("pointerdown",()=>this.buttonScore.setFont("38px arc-font")).on("pointerup",()=>{this.buttonScore.setFont("44px arc-font"),this.scene.stop("menu"),this.events.emit("updateScores"),this.scene.start("scores")})}}},1155:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PauseMenu=class extends Phaser.Scene{constructor(){super({key:"pauseMenu"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 0.75)"),this.scene.moveUp("pauseMenu")}create(){this.tittleLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Gioco in pausa",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonResume=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Continua",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonResume.setColor("#30db16")).on("pointerout",()=>this.buttonResume.setColor("#dbba16")).on("pointerdown",()=>this.buttonResume.setFont("38px arc-font")).on("pointerup",()=>{this.buttonResume.setFont("44px arc-font"),this.scene.stop("pauseMenu"),this.scene.resume("main")}),this.buttonMenu=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Menu",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonMenu.setColor("#30db16")).on("pointerout",()=>this.buttonMenu.setColor("#dbba16")).on("pointerdown",()=>this.buttonMenu.setFont("38px arc-font")).on("pointerup",()=>{this.buttonMenu.setFont("44px arc-font"),this.scene.stop("pauseMenu"),this.scene.start("menu")})}}},1156:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(466);t.GameHud=class extends Phaser.Scene{constructor(){super({key:"gameHud"}),this.gameMode=0,this.score=0}init(){this.mainScene=this.scene.get("main"),this.playerHealth=this.add.group()}create(){this.scoreLabel=this.add.text(15,15,"Punteggio 0",{font:"40px arc-font",fill:"#fff"}),this.pauseBotton=this.add.text(this.sys.canvas.width-45,this.sys.canvas.height-30,"Pausa",{font:"35px arc-font",fill:"#fff"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.pauseBotton.setColor("#dbba16")).on("pointerout",()=>this.pauseBotton.setColor("#fff")).on("pointerdown",()=>this.pauseBotton.setFont("29px arc-font")).on("pointerup",()=>{this.pauseBotton.setFont("35px arc-font"),this.scene.pause("main"),this.scene.launch("pauseMenu")}),this.mainScene.events.on("incrementScore",function(e){this.score+=e,this.scoreLabel.setText("Punteggio "+this.score)},this),this.mainScene.events.on("decraseHealth",this.decrasePlayerHealth,this)}initPlayerHealth(e){this.gameMode=e,this.playerHealth.getChildren().forEach(e=>e.destroy()),this.playerHealth.getChildren().forEach(e=>e.destroy());for(let t=1;t<=3;t++){let s=this.add.image(0,0,"playerHealthSprt"+e),i=25/s.width;s.setScale(i),s.x=this.mainScene.sys.canvas.width-t*(s.width*i),s.y=s.height*i,this.playerHealth.add(s)}this.score=0,this.scoreLabel.setText("Punteggio 0")}decrasePlayerHealth(){this.playerHealth.getChildren()[this.playerHealth.getChildren().length-1].destroy(),0==this.playerHealth.getChildren().length&&(this.scene.pause("main"),this.pushScore(),this.scene.launch("loseScreen"))}getDate(){const e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}pushScore(){i.Scores.scores.push([this.score,this.getDate()])}getScore(){return this.score}getGameMode(){return this.gameMode}}},1157:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Lose=class extends Phaser.Scene{constructor(){super({key:"loseScreen"})}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")}create(){let e=this.scene.get("gameHud").getGameMode(),t=this.scene.get("gameHud").getScore();this.messageLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Hai perso bitch",{font:"77px arc-font",fill:"#ff0000"}).setOrigin(.5),this.scoreLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"Punteggio: "+t,{font:"55px arc-font",fill:"#ff0000"}).setOrigin(.5),this.buttonRestart=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Nuova partita",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonRestart.setColor("#30db16")).on("pointerout",()=>this.buttonRestart.setColor("#dbba16")).on("pointerdown",()=>this.buttonRestart.setFont("38px arc-font")).on("pointerup",()=>{this.buttonRestart.setFont("44px arc-font"),this.scene.stop("loseScreen"),this.scene.get("gameHud").initPlayerHealth(e),this.scene.get("main").scene.restart()}),this.buttonMenu=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Menu",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",()=>this.buttonMenu.setColor("#30db16")).on("pointerout",()=>this.buttonMenu.setColor("#dbba16")).on("pointerdown",()=>this.buttonMenu.setFont("38px arc-font")).on("pointerup",()=>{this.buttonMenu.setFont("44px arc-font"),this.scene.stop("loseScreen"),this.scene.start("menu")})}}},465:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Shot=class extends Phaser.GameObjects.Image{constructor(e,t,s,i,n){super(e,t,s,n),this.scene.physics.world.enable(this),this.scene.add.existing(this);let o=10/this.width;this.setScale(o),this.setDepth(-1),this.initMovement(i)}initMovement(e){this.scene.physics.world.enable(this),this.body.setVelocityY(e)}update(){this.y<0&&this.destroy()}}},466:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Phaser.Scene{constructor(){super({key:"scores"}),this.textGroup=[]}init(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)"),null!=sessionStorage.getItem("scores")&&i.scores.length>0&&(i.scores=JSON.parse(sessionStorage.getItem("scores"))),this.updateScores(),this.scene.moveUp("scores")}create(){this.titleLabel=this.add.text(this.sys.canvas.width/2,66,"Punteggi",{font:"70px arc-font",fill:"#347deb"}).setOrigin(.5),this.buttonMenu=this.add.text(15,15,"Menu",{font:"40px arc-font",fill:"#dbba16"}).setInteractive().on("pointerover",()=>this.buttonMenu.setColor("#30db16")).on("pointerout",()=>this.buttonMenu.setColor("#dbba16")).on("pointerdown",()=>this.buttonMenu.setFont("38px arc-font")).on("pointerup",()=>{this.buttonMenu.setFont("40px arc-font"),this.scene.stop("scores"),this.scene.start("menu")}),this.scene.get("menu").events.on("updateScores",this.updateScores,this)}getMaxScore(){let e=0;return i.scores.forEach(t=>e=t[0]>e?t[0]:e),e}updateScores(){sessionStorage.setItem("scores",JSON.stringify(i.scores)),this.reformatScores(),this.textGroup.forEach(e=>e.destroy());let e=this.maxScore=this.add.text(this.sys.canvas.width/2,180,"Punteggio massimo: "+this.getMaxScore(),{font:"40px arc-font",fill:"#fff"}).setOrigin(.5);this.textGroup.push(e),this.add.graphics({x:0,y:0,fillStyle:{color:16711680,alpha:1}}).fillRect((this.sys.canvas.width-400)/2,222,400,3);let t=0,s="";this.reformatScores().forEach(e=>{let i=e[1]===s?"||":e[1],n=e[0].toString();const o=("- "+i).padEnd(16,"_")+n.padStart(4,"_");let a=this.add.text(this.sys.canvas.width/2,264+t,o,{font:"40px arc-font",fill:"#fff"}).setOrigin(.5);this.textGroup.push(a),t+=40,s=e[1]})}reformatScores(){let e=i.scores,t=[],s=0;for(let n=i.scores.length-1;n>0&&9!=s;n--)t.push(e[n]),s++;return t}}i.scores=[[0,""]],t.Scores=i},467:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(468);const i=s(1150),n=s(1151),o=s(1154),a=s(1155),r=s(466),h=s(1156),c=s(1157),l={type:Phaser.AUTO,parent:"canvas",width:777,height:666,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[i.Preloader,n.Main,o.Menu,a.PauseMenu,r.Scores,h.GameHud,c.Lose]};window.addEventListener("load",()=>{new Phaser.Game(l)})}});