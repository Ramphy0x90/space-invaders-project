!function(t){function e(e){for(var i,r,a=e[0],c=e[1],h=e[2],p=0,l=[];p<a.length;p++)r=a[p],o[r]&&l.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);for(u&&u(e);l.length;)l.shift()();return s.push.apply(s,h||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={0:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var h=0;h<a.length;h++)e(a[h]);var u=c;s.push([466,1]),n()}({1149:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this,{key:"preloader",pack:{files:[{type:"image",key:"shipTest",url:"./assets/spritesheets/shipTest.png"},{type:"image",key:"shotTest",url:"./assets/spritesheets/shotTest.png"},{type:"image",key:"healthTest",url:"./assets/spritesheets/healthTest.png"}]}})||this}return i(e,t),e.prototype.init=function(){this.scene.start("main"),this.scene.pause("main"),this.scene.launch("menu"),this.scene.launch("gameHud"),this.scene.moveAbove("gameHud","menu")},e.prototype.preload=function(){this.load.audio("playerShoot","./assets/audio/shoot.wav"),this.load.audio("enemyKilled","./assets/audio/invaderkilled.wav")},e}(Phaser.Scene);e.Preloader=o},1150:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1151),s=n(1152),r=function(t){function e(){var e=t.call(this,"main")||this;return e.enemiesPoints=[30,20,20,10,10],e.enemiesShootTiming=0,e.enemiesMarginGrid=50,e}return i(e,t),e.prototype.init=function(){this.key=this.input.keyboard.createCursorKeys(),this.enemies=this.add.group({runChildUpdate:!0})},e.prototype.create=function(){this.player=new o.Player(this,"shipTest",this.key),this.enemiesReferGrid=[],this.enemiesShootDelay=1666;for(var t=0;t<5;t++){for(var e=[],n=0;n<11;n++)this.enemies.add(new s.Enemy(this,60+n*this.enemiesMarginGrid,60+t*this.enemiesMarginGrid,"",n+";"+t,this.enemiesPoints[t])),e.push(1);this.enemiesReferGrid.push(e)}console.log(this.enemiesReferGrid)},e.prototype.update=function(t){if(this.player.move(t),s.Enemy.updatePosition(t),this.enemiesShootTiming<t){var e=this.getEnemiesShooting();e[Math.floor(Math.random()*e.length)].shoot(),this.enemiesShootTiming=t+this.enemiesShootDelay}},e.prototype.checkCollisionShotPlayer=function(t){var e=this,n=this.enemiesReferGrid;this.enemies.getChildren().forEach(function(i){i.active&&e.physics.add.overlap(t,i,function(){n[Number(i.getCoordinates()[1])][Number(i.getCoordinates()[0])]=0,i.die(),t.destroy()})}),this.enemiesReferGrid=n,console.log(this.getEnemiesAreaRange())},e.prototype.checkCollisionShotEnemy=function(t){var e=this.player;this.physics.add.overlap(t,e,function(){e.mainScene.events.emit("decraseHealth"),t.destroy()})},e.prototype.getEnemiesAreaRange=function(){for(var t,e,n,i=10,o=0,s=0,r=0;r<this.enemiesReferGrid.length;r++)for(var a=this.enemiesReferGrid[r].length-1;a>=0;a--)this.enemiesReferGrid[r][a]&&a>o&&(o=a,e=this.enemies.getChildren()[11*r+a]),this.enemiesReferGrid[r][10-a]&&10-a<i&&(i=10-a,t=this.enemies.getChildren()[11*r+(10-a)]),this.enemiesReferGrid[4-r][10-a]&&4-r>s&&(s=4-r,n=this.enemies.getChildren()[11*(4-r)+a]);return this.correctEnemiesRefer([t,e,n])},e.prototype.correctEnemiesRefer=function(t){var e=[];return void 0==t[0]?e[0]=e[1]=t[1]:void 0==t[1]?e[0]=e[1]=t[0]:e=t,void 0==t[2]&&(e[2]=e[0]),e},e.prototype.getEnemiesShooting=function(){for(var t=[],e=0;e<5;e++)for(var n=0;n<11;n++)this.enemiesReferGrid[e][n]&&(t[n]=this.enemies.getChildren()[11*e+n]);return t},e.prototype.decraseEnemiesShootDelay=function(){this.enemiesShootDelay-=this.enemiesShootDelay-50<1500?50:0},e}(Phaser.Scene);e.Main=r},1151:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(465),s=function(t){function e(e,n,i){var o=t.call(this,e,0,0,n)||this;return o.customKeys={},o.shootTiming=0,o.bulletsAlive=o.scene.add.group(),o.inputKey=i,o.customKeys.D=o.scene.input.keyboard.addKey("D"),o.mainScene=e,o.canvas=o.mainScene.sys.canvas,o.scale=70/o.width,o.x=o.canvas.width/2,o.y=o.canvas.height-o.height*o.scale,o.scene.physics.world.enable(o),o.scene.add.existing(o),o.setScale(o.scale),o}return i(e,t),e.prototype.move=function(t){if(this.inputKey.left.isDown&&this.x>this.width*this.scale/2&&(this.x+=-5),this.inputKey.right.isDown&&this.x<this.canvas.width-this.width*this.scale/2&&(this.x+=5),this.inputKey.space.isDown&&this.bulletsAlive.getLength()<1&&this.shootTiming<t){var e=new o.Shot(this.scene,this.x,this.y,-450,"shotTest");this.bulletsAlive.add(e),this.mainScene.checkCollisionShotPlayer(e),this.mainScene.sound.play("playerShoot"),this.shootTiming=t+450}this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()},e}(Phaser.GameObjects.Image);e.Player=s},1152:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(465),s=function(t){function e(n,i,o,s,r,a){var c=t.call(this,n,i,o,s)||this;return c.bulletsAlive=c.scene.add.group(),c.id=r,c.point=a,e.width=c.width,e.height=c.height,e.speed=10,e.timingMove=0,e.enemyMovedelay=420,e.mainScene=n,e.canvas=n.sys.canvas,c.customY=c.y,c.scene.physics.world.enable(c),c.scene.add.existing(c),c}return i(e,t),e.prototype.getId=function(){return this.id},e.prototype.getCoordinates=function(){return[this.getId().split(";")[0],this.getId().split(";")[1]]},e.prototype.incrementSpeed=function(){var t=e.speed<0?-1:1,n=this.point/10;Math.abs(e.speed+n*t)<25&&(e.speed+=n*t,e.enemyMovedelay-=this.point)},e.updatePosition=function(t){var n=e.mainScene.getEnemiesAreaRange()[0],i=e.mainScene.getEnemiesAreaRange()[1];this.timingMove<t&&(e.mainScene.enemies.getChildren().forEach(function(t){return t.x+=e.speed}),i.x<=e.canvas.width-2*e.width&&n.x>2*this.width||(e.speed*=-1,e.goDown()),e.timingMove=t+e.enemyMovedelay)},e.goDown=function(){e.mainScene.getEnemiesAreaRange()[2].customY<e.canvas.height-2*e.height&&setTimeout(function(){e.mainScene.enemies.getChildren().forEach(function(t){t.customY+=15,t.y=t.customY})},100)},e.prototype.shoot=function(){var t=new o.Shot(e.mainScene,this.x,this.y,450,"shotTest");this.bulletsAlive.add(t),e.mainScene.checkCollisionShotEnemy(t),this.bulletsAlive.getLength()>0&&this.bulletsAlive.getChildren()[0].update()},e.prototype.die=function(){this.incrementSpeed(),e.mainScene.sound.play("enemyKilled"),e.mainScene.events.emit("incrementScore",this.point),e.mainScene.decraseEnemiesShootDelay(),this.setActive(!1),this.setVisible(!1)},e.speed=10,e.timingMove=0,e.enemyMovedelay=420,e}(Phaser.GameObjects.Image);e.Enemy=s},1153:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this,{key:"menu"})||this}return i(e,t),e.prototype.init=function(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")},e.prototype.create=function(){var t=this;this.titleLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Space Invaders",{font:"88px arc-font",fill:"#fff"}).setOrigin(.5),this.descriptionLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"- Progetto finale scolastico -",{font:"40px arc-font",fill:"#fff"}).setOrigin(.5),this.buttonStart=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Gioca",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonStart.setColor("#30db16")}).on("pointerout",function(){return t.buttonStart.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonStart.setFont("38px arc-font")}).on("pointerup",function(){t.buttonStart.setFont("44px arc-font"),t.scene.stop("menu"),t.scene.get("gameHud").initPlayerHealth(),t.scene.get("main").scene.restart()}),this.buttonScore=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Punteggi",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonScore.setColor("#30db16")}).on("pointerout",function(){return t.buttonScore.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonScore.setFont("38px arc-font")}).on("pointerup",function(){t.buttonScore.setFont("44px arc-font")})},e}(Phaser.Scene);e.Menu=o},1154:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this,{key:"gameHud"})||this;return e.score=0,e}return i(e,t),e.prototype.init=function(){this.mainScene=this.scene.get("main"),this.playerHealth=this.add.group()},e.prototype.create=function(){var t=this.add.text(15,15,"Punteggio: "+this.score,{font:"30px Arial",fill:"#fff"});this.mainScene.events.on("incrementScore",function(e){this.score+=e,t.setText("Punteggio: "+this.score)},this),this.mainScene.events.on("decraseHealth",this.decrasePlayerHealth,this)},e.prototype.initPlayerHealth=function(){this.playerHealth=this.add.group();for(var t=1;t<=3;t++){var e=this.add.image(0,0,"healthTest"),n=25/e.width;e.setScale(n),e.x=this.mainScene.sys.canvas.width-t*(e.width*n),e.y=e.height*n,this.playerHealth.add(e)}},e.prototype.decrasePlayerHealth=function(){this.playerHealth.getChildren()[this.playerHealth.getChildren().length-1].destroy(),0==this.playerHealth.getChildren().length&&(this.scene.pause("main"),this.scene.launch("loseScreen"))},e.prototype.getScore=function(){return this.score},e}(Phaser.Scene);e.GameHud=o},1155:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this,{key:"loseScreen"})||this}return i(e,t),e.prototype.init=function(){this.camera=this.cameras.add(0,0,this.sys.canvas.width,this.sys.canvas.height),this.camera.setBackgroundColor("rgba(0, 0, 0, 1)")},e.prototype.create=function(){var t=this,e=this.scene.get("gameHud").getScore();this.messageLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*3.6,"Hai perso bitch",{font:"77px arc-font",fill:"#ff0000"}).setOrigin(.5),this.scoreLabel=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*4.4,"Punteggio: "+e,{font:"55px arc-font",fill:"#ff0000"}).setOrigin(.5),this.buttonRestart=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*5.8,"Nuova partita",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonRestart.setColor("#30db16")}).on("pointerout",function(){return t.buttonRestart.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonRestart.setFont("38px arc-font")}).on("pointerup",function(){t.buttonRestart.setFont("44px arc-font"),t.scene.stop("loseScreen"),t.scene.get("gameHud").initPlayerHealth(),t.scene.get("main").scene.restart()}),this.buttonMenu=this.add.text(this.sys.canvas.width/2,this.sys.canvas.height/10*6.6,"Menu",{font:"44px arc-font",fill:"#dbba16"}).setOrigin(.5).setInteractive().on("pointerover",function(){return t.buttonMenu.setColor("#30db16")}).on("pointerout",function(){return t.buttonMenu.setColor("#dbba16")}).on("pointerdown",function(){return t.buttonMenu.setFont("38px arc-font")}).on("pointerup",function(){t.buttonMenu.setFont("44px arc-font"),t.scene.stop("loseScreen"),t.scene.start("menu")})},e}(Phaser.Scene);e.Lose=o},465:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i,o,s){var r=t.call(this,e,n,i,s)||this;return r.scene.physics.world.enable(r),r.scene.add.existing(r),r.setScale(.05),r.setDepth(-1),r.initMovement(o),r}return i(e,t),e.prototype.initMovement=function(t){this.scene.physics.world.enable(this),this.body.setVelocityY(t)},e.prototype.update=function(){this.y<0&&this.destroy()},e}(Phaser.GameObjects.Image);e.Shot=o},466:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(467);var i=n(1149),o=n(1150),s=n(1153),r=n(1154),a=n(1155),c={type:Phaser.AUTO,parent:"canvas",width:777,height:666,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[i.Preloader,o.Main,s.Menu,r.GameHud,a.Lose]};window.addEventListener("load",function(){new Phaser.Game(c)})}});